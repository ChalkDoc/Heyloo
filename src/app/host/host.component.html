<html id='host'>
<div class="sz-container">

  <!-- Currently removed and needs to be placed somewhere else on the screen -->
  <!-- persistent room code -->
  <!-- <div class="col-md-12">
    <div class='room-code' *ngIf='currentGame'>
      <h3>Room Code: {{currentGame?.id}}</h3>
    </div>
  </div> -->

  <!-- waiting room -->
  <div class="starting" *ngIf="currentGame?.game_state == 'starting' ">
    <div class="jumbotron">
      <h1><span class="heyloo">Heyloo!</span></h1>
      <h2>Go to https://heyloo-ced60.firebaseapp.com on your mobile device</h2>
      <h2>Our Room Code is {{currentGame?.id}}</h2>
      <p><button class="starting-btn" (click)='gameStateCountdown()'>Let's begin!</button></p>
    </div>
    <div class="col-md-12">
      <h3>Who's here:</h3>
      <div class="player-list" *ngFor='let player of playersList'>
        <span class='starting-players' (click)='deleteStudent(player)'>{{player.name}}</span>
        <br>
        <br>
      </div>
    </div>
  </div>

  <!-- countdown phase -->
  <div class="countdown" *ngIf="currentGame?.game_state == 'countdown' ">
    <h1>New question in {{time}} . . .</h1>
  </div>

  <!-- prequestion phase (answers don't show yet) -->
  <div class="prequestion" *ngIf="currentGame?.game_state == 'prequestion' ">
    <div class="col-md-1">
      <span class='prequestion-timer'>{{time}}</span>
    </div>
    <div class="col-md-1">
    </div>
    <div class="col-md-8">
      <h1 id=prequestion-question-number>{{currentQuestion?.title}}</h1>
    </div>
    <div class="col-md-2">
      <button class="prequestion-skip-btn" type="button" (click)='endTimer()'>Skip question</button>
    </div>
    <div class="row">
    </div>
    <div class="jumbotron">
      <div class="current-question" *ngIf="currentQuestionSubstring == 'https'">
        {{currentQuestion?.instructions}}
        <br>
        <img class="prequestion-prompt" src="{{currentQuestion?.prompt}}">
      </div>
      <div class="current-question" *ngIf="currentQuestionSubstring != 'https'">
        {{currentQuestion?.instructions}}
        <br>
        <img class="prequestion-prompt" src="{{currentQuestion?.prompt}}">
      </div>
    </div>
  </div>

  <!-- question phase (students see answer choices and can select their answer) -->

  <div class="wholePageBounds" fxLayoutGap=".6vw" *ngIf="currentGame?.game_state == 'question'" fxLayout="column" fxFlexFill>
    <!-- toolbar row -->
    <div fxFlex="1 auto" class="toolbar">
      <div class="col-md-1">
        <span class='question-timer'>{{time}}</span>
      </div>
      <div class="col-md-1">
      </div>
      <div class="col-md-8">
      </div>
      <div class="col-md-2">
        <button class="question-skip-btn" type="button" (click)='endTimer()'>Skip question</button>
      </div>
    </div>
    <!-- prompt row -->
    <div fxFlex="1 auto" fxLayout="column" class="prompt">
      <!-- <div class="q-p-instructions" *ngIf="currentQuestionSubstring == 'https'">
        {{currentQuestion?.instructions}}
        <br>
        <img class="question-reduced-prompt" src="{{currentQuestion?.prompt}}">
      </div> -->
      <div class="question-prompt-instructions" *ngIf="currentQuestionSubstring != 'https'">
        {{currentQuestion?.instructions}}
      </div>
      <div class="question-prompt-image" *ngIf="currentQuestionSubstring != 'https'">
        <img fxFlex="40" src="{{currentQuestion?.prompt}}">
      </div>
    </div>
    <!-- answer section -->
    <div fxFlex="4 auto" class="answersDiv" fxLayoutGap=".6vw" fxLayout="column" fxFlexFill>
      <div fxFlex="1 auto" fxLayoutGap=".6vw" class="AnswerRow" fxLayout="row">
        <div fxFlex="50" class="answer A">
          <div class="fontawesomebg"></div>
          <img fxFlex="70" class="question-answer" src="{{currentQuestion?.choices[0]}}">
        </div>
        <div fxFlex="50" class="answer B">
          <img fxFlex="70" class="question-answer" src="{{currentQuestion?.choices[1]}}">
        </div>
      </div>
      <div fxFlex="1 auto" fxLayoutGap=".6vw" class="AnswerRow" fxLayout="row">
        <div fxFlex="50" class="answer C">
          <img fxFlex="70" class="question-answer" src="{{currentQuestion?.choices[2]}}">
        </div>
        <div fxFlex="50" class="answer D">
          <img fxFlex="70" class="question-answer" src="{{currentQuestion?.choices[3]}}">
        </div>
      </div>
    </div>
  </div>

  <!-- answer phase (host component shows the answer distribution chart, student component shows individual results page) -->
  <div class="wholePageBounds" fxLayoutGap=".6vw" *ngIf="currentGame?.game_state == 'answer'" fxLayout="column" fxFlexFill>

    <!-- toolbar row -->
    <div fxFlex="1 auto" class="toolbar">
      <div class="tabs">

        <input type="radio" id="tab1" name="tab-control">
        <input type="radio" id="tab2" name="tab-control" checked>
        <input type="radio" id="tab3" name="tab-control">
        <input type="radio" id="tab4" name="tab-control">
        <input type="radio" id="tab5" name="tab-control">

        <ul>
          <li title="Question"><label for="tab1" role="button"><svg viewBox="0 0 24 24"><path d="M14,2A8,8 0 0,0 6,10A8,8 0 0,0 14,18A8,8 0 0,0 22,10H20C20,13.32 17.32,16 14,16A6,6 0 0,1 8,10A6,6 0 0,1 14,4C14.43,4 14.86,4.05 15.27,4.14L16.88,2.54C15.96,2.18 15,2 14,2M20.59,3.58L14,10.17L11.62,7.79L10.21,9.21L14,13L22,5M4.93,5.82C3.08,7.34 2,9.61 2,12A8,8 0 0,0 10,20C10.64,20 11.27,19.92 11.88,19.77C10.12,19.38 8.5,18.5 7.17,17.29C5.22,16.25 4,14.21 4,12C4,11.7 4.03,11.41 4.07,11.11C4.03,10.74 4,10.37 4,10C4,8.56 4.32,7.13 4.93,5.82Z"/>
            </svg><br><span>Question</span></label></li>
          <li title="Chart"><label for="tab2" role="button"><svg viewBox="0 0 24 24"><path d="M2,10.96C1.5,10.68 1.35,10.07 1.63,9.59L3.13,7C3.24,6.8 3.41,6.66 3.6,6.58L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.66,6.72 20.82,6.88 20.91,7.08L22.36,9.6C22.64,10.08 22.47,10.69 22,10.96L21,11.54V16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V10.96C2.7,11.13 2.32,11.14 2,10.96M12,4.15V4.15L12,10.85V10.85L17.96,7.5L12,4.15M5,15.91L11,19.29V12.58L5,9.21V15.91M19,15.91V12.69L14,15.59C13.67,15.77 13.3,15.76 13,15.6V19.29L19,15.91M13.85,13.36L20.13,9.73L19.55,8.72L13.27,12.35L13.85,13.36Z" />
            </svg><br><span>Chart</span></label></li>
          <li title="Leaderboard"><label for="tab3" role="button"><svg viewBox="0 0 24 24"><path d="M3,4A2,2 0 0,0 1,6V17H3A3,3 0 0,0 6,20A3,3 0 0,0 9,17H15A3,3 0 0,0 18,20A3,3 0 0,0 21,17H23V12L20,8H17V4M10,6L14,10L10,14V11H4V9H10M17,9.5H19.5L21.47,12H17M6,15.5A1.5,1.5 0 0,1 7.5,17A1.5,1.5 0 0,1 6,18.5A1.5,1.5 0 0,1 4.5,17A1.5,1.5 0 0,1 6,15.5M18,15.5A1.5,1.5 0 0,1 19.5,17A1.5,1.5 0 0,1 18,18.5A1.5,1.5 0 0,1 16.5,17A1.5,1.5 0 0,1 18,15.5Z" />
            </svg><br><span>Leaderboard</span></label></li>
          <li (click)='continueGame()' title="Next Question"><label for="tab4" role="button"><svg viewBox="0 0 24 24"><path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z" />
            </svg><br><span>Next Question</span></label></li>
          <li (click)='endGame()' title="End Game"><label for="tab5" role="button"><svg viewBox="0 0 24 24"><path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z" />
            </svg><br><span>End Game</span></label></li>
        </ul>

        <div class="slider">
          <div class="indicator"></div>
        </div>
        <div class="content">
          <section fxFlex="4 auto" class="answer-question-Tab-content" fxLayoutGap=".6vw" fxLayout="column" fxFlexFill>
            Answer chart data goes here</section>
          <section fxFlex="4 auto" class="answer-chart-Tab-content" fxLayoutGap=".6vw" fxLayout="column" fxFlexFill>
            Answer chart data goes here</section>
          <section>
            <h2>Delivery Contents</h2>
            leaderboard content goes here</section>
        </div>
      </div>
    </div>



    <button class="answer-showqs-btn" (click)="showQuestion=!showQuestion" (click)="hideBarGraph=!hideBarGraph">{{showQuestion ? 'Show Distribution' : 'Show Question'}}</button>
    <button class="answer-leaderboard-btn" type="button" (click)='gameStateLeaderboard()'>Go to Leaderboard</button>

    <br><br>
    <img class="answer-correctansw-image" src="{{currentGame?.question_list[currentGame?.current_question].choices[currentGame?.question_list[currentGame?.current_question].answer]}}" alt="">
    <br>
    <div class="row" *ngIf='showQuestion'>
      <div class="answer-question" *ngIf="currentQuestionSubstring == 'https'">
        {{currentQuestion?.instructions}}
        <br><br>
        <img src="{{currentQuestion?.prompt}}">
      </div>
      <div class="answer-question" *ngIf="currentQuestionSubstring != 'https'">
        {{currentQuestion?.instructions}}
        <br>
        <img class="answer-reduced-prompt" src="{{currentQuestion?.prompt}}">
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="answer-answer1">
            <i class="fa fa-paper-plane fa-5x" aria-hidden="true"></i>
            <p><img class="answer-multchoice-answer" src="{{currentQuestion?.choices[0]}}"></p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="answer-answer2">
            <i class="fa fa-star fa-5x" aria-hidden="true"></i>
            <p><img class="answer-multchoice-answer" src="{{currentQuestion?.choices[1]}}"></p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="answer-answer3">
            <i class="fa fa-heart fa-5x" aria-hidden="true"></i>
            <p><img class="answer-multchoice-answer" src="{{currentQuestion?.choices[2]}}"></p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="answer-answer4">
            <i class="fa fa-rocket fa-5x" aria-hidden="true"></i>
            <p><img class="answer-multchoice-answer" src="{{currentQuestion?.choices[3]}}"></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Bar graph section (should be added as another phase)-->
    <div class="answer-bar-graph" *ngIf='hideBarGraph'>
      <app-bar-graph [thisQuestion]="currentQuestion"></app-bar-graph>
      <div class="AnswerRow">
        <div class="col-md-3">
          <div class="answer-answer1">
            <p><img class="AnswerChartImg" src="{{currentQuestion?.choices[0]}}"></p>
          </div>
        </div>

        <div class="col-md-3">
          <div class="answer-answer2">
            <p><img class="AnswerChartImg" src="{{currentQuestion?.choices[1]}}"></p>
          </div>
        </div>

        <div class="col-md-3">
          <div class="answer-answer3">
            <p><img class="AnswerChartImg" src="{{currentQuestion?.choices[2]}}"></p>
          </div>
        </div>

        <div class="col-md-3">
          <div class="answer-answer4">
            <p><img class="AnswerChartImg" src="{{currentQuestion?.choices[3]}}"></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- leaderboard phase -->
  <div class="container-fluid leaderboard" *ngIf="currentGame?.game_state == 'leaderboard' ">
    <div class="" *ngIf="currentGame?.game_over == false">
      <button class="leaderboard-nextqs-btn" type="button" (click)='gameStateCountdown()'>Next Question</button>
      <button class="leaderboard-endgame-btn" type="button" (click)='endGame()'>End Game</button>
      <h1>Leaderboard:</h1>
      <div class="col-md-12" *ngFor='let player of topPlayers'>
        {{player.name}} - {{player.points}}
      </div>
    </div>
  </div>

  <!-- game over - contained within leaderboard phase -->
  <div class="GameOver" *ngIf="currentGame?.game_over == true">
    <h1>Final Scores:</h1>
    <div class="col-md-12" *ngFor='let player of topPlayers'>
      {{player.name}} - {{player.points}}
    </div>
    <a class="gameover-rtnhome-btn" href="/start">Return to Home</a>
  </div>
</div>

</html>